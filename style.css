
:root {
    --body-bg-gradient-light: linear-gradient(135deg, #e0e5ec 0%, #f0f5fa 100%);
    --body-bg-gradient-dark: linear-gradient(135deg, #131419 0%, #1a1a24 100%);
    --bg-color: #e0e5ec;
    --primary-font-color: rgba(144, 152, 168, 1);
    --secondary-font-color: rgba(51, 64, 89, 1);
    --accent-color: #5d9cec;
    --accent-hover: #4a89dc;
    --equals-color: #ff7043;
    --equals-hover: #ff5722;
    --soft-high-light: rgba(255, 255, 255, 0.43);
    --dark-high-light: rgba(217, 210, 200, 0.51);
    --shadow-intensity: 6px;
    --transition-speed: 0.3s;
    --sidebar-width: 300px;
}

[data-theme="dark"] {
    --bg-color: #131419;
    --primary-font-color: #c7c7c7;
    --secondary-font-color: #5d9cec;
    --accent-color: #4a89dc;
    --accent-hover: #3b7dd8;
    --equals-color: #ff7043;
    --equals-hover: #ff5722;
    --soft-high-light: rgba(255, 255, 255, 0.05);
    --dark-high-light: rgba(0, 0, 0, 0.51);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: "Poppins", "Odibee Sans", sans-serif;
    background: var(--body-bg-gradient-light);
    color: var(--primary-font-color);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background var(--transition-speed) ease;
}

body[data-theme="dark"] {
    background: var(--body-bg-gradient-dark);
}

.app-container {
    display: flex;
    gap: 20px;
    max-width: 1200px;
    width: 100%;
    padding: 20px;
}

.history-sidebar {
    width: var(--sidebar-width);
    background: var(--bg-color);
    border-radius: 20px;
    padding: 20px;
    box-shadow: 12px 12px 24px 0 var(--dark-high-light),
                -12px -12px 24px 0 var(--soft-high-light);
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
    max-height: 80vh;
    overflow: hidden;
}

.sidebar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--soft-high-light);
}

.sidebar-header h3 {
    color: var(--secondary-font-color);
}

.close-sidebar {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--primary-font-color);
    cursor: pointer;
}

.history-list {
    flex-grow: 1;
    overflow-y: auto;
    list-style: none;
    margin-bottom: 20px;
}

.history-list li {
    padding: 10px;
    margin-bottom: 8px;
    border-radius: 10px;
    background: var(--bg-color);
    box-shadow: inset 2px 2px 5px var(--dark-high-light),
                inset -2px -2px 5px var(--soft-high-light);
    cursor: pointer;
    transition: all 0.2s ease;
}

.history-list li:hover {
    transform: translateY(-2px);
    box-shadow: 4px 4px 8px var(--dark-high-light),
                -4px -4px 8px var(--soft-high-light);
}

.clear-history {
    padding: 10px;
    border-radius: 15px;
    background: var(--bg-color);
    color: var(--secondary-font-color);
    border: none;
    box-shadow: 4px 4px 8px var(--dark-high-light),
                -4px -4px 8px var(--soft-high-light);
    cursor: pointer;
    transition: all 0.2s ease;
}

.clear-history:hover {
    transform: translateY(-2px);
}

.calculator {
    background: var(--bg-color);
    color: var(--primary-font-color);
    position: relative;
    overflow: hidden;
    border-radius: 30px;
    box-shadow: 12px 12px 24px 0 var(--dark-high-light),
                -12px -12px 24px 0 var(--soft-high-light);
    transition: all var(--transition-speed) ease;
    flex-grow: 1;
}

.display {
    box-shadow: inset 8px 8px 12px 0 var(--dark-high-light),
                inset -8px -8px 12px 0 var(--soft-high-light);
    border: none;
    color: var(--secondary-font-color);
    background: var(--bg-color);
    font-size: 2.5rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0 25px;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
}

.live-result {
    color: var(--primary-font-color);
    font-size: 1.2rem;
    text-align: right;
    padding: 0 25px 10px;
    height: 30px;
    opacity: 0.7;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.history {
    color: var(--primary-font-color);
    font-size: 1rem;
    text-align: right;
    padding: 10px 25px 0;
    height: 30px;
    opacity: 0.7;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.neumorphic {
    box-shadow: var(--shadow-intensity) var(--shadow-intensity) calc(var(--shadow-intensity) * 2) 0 var(--dark-high-light),
                calc(var(--shadow-intensity) * -1) calc(var(--shadow-intensity) * -1) calc(var(--shadow-intensity) * 2) 0 var(--soft-high-light);
    border-radius: 20px;
    transition: all var(--transition-speed) ease;
    border: none;
    background: var(--bg-color);
    color: var(--primary-font-color);
    -webkit-user-select: none;
    user-select: none;
    position: relative;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
}

.neumorphic:hover {
    transform: translateY(-2px);
    box-shadow: 8px 8px 16px var(--dark-high-light),
                -8px -8px 16px var(--soft-high-light);
}

.neumorphic:active {
    box-shadow: inset 6px 6px 10px 0 var(--dark-high-light),
                inset -6px -6px 10px 0 var(--soft-high-light);
    transform: translateY(1px);
}

.neumorphic.operator {
    color: var(--accent-color);
    font-weight: 500;
}

.neumorphic.equals {
    background: var(--equals-color);
    color: white;
    box-shadow: 6px 6px 12px 0 rgba(0, 0, 0, 0.2),
                -6px -6px 12px 0 rgba(255, 255, 255, 0.1);
}

.neumorphic.equals:hover {
    background: var(--equals-hover);
    box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.2),
                -8px -8px 16px rgba(255, 255, 255, 0.1);
}

.neumorphic.equals:active {
    box-shadow: inset 6px 6px 10px 0 rgba(0, 0, 0, 0.2),
                inset -6px -6px 10px 0 rgba(255, 255, 255, 0.1);
}

/* Grid Layout */
.calculator {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: auto auto auto auto auto repeat(5, 1fr);
    grid-template-areas: 
        "toggle toggle toggle toggle"
        "voice voice voice voice"
        "history history history history"
        "display display display display"
        "live live live live"
        "memory memory memory memory"
        "c signed percent divide"
        "seven eight nine times"
        "four five six minus"
        "one two three plus"
        "zero zero decimal equals";
    gap: 15px;
    padding: 25px;
    width: 340px;
}

.voice-controls {
    grid-area: voice;
    display: flex;
    justify-content: space-around;
    gap: 10px;
    margin-bottom: 10px;
}

.voice-controls .neumorphic {
    flex: 1;
    height: 40px;
    font-size: 1.2rem;
}

.live-result {
    grid-area: live;
}

.memory-buttons {
    grid-area: memory;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
}

.toggle {
    grid-area: toggle;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.theme-switch-wrapper {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}

.color-picker {
    display: flex;
    align-items: center;
    gap: 5px;
}

.color-picker input[type="color"] {
    width: 30px;
    height: 30px;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    background: transparent;
}

.color-picker input[type="color"]::-webkit-color-swatch {
    border-radius: 50%;
    border: none;
}

.color-picker label {
    font-size: 0.8rem;
    opacity: 0.7;
}

.mode-label {
    font-size: 0.9rem;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.mode-toggle {
    display: flex;
}

.scientific-toggle {
    padding: 8px 15px;
    font-size: 0.8rem;
    border-radius: 20px;
}

.history {
    grid-area: history;
}

.display {
    grid-area: display;
}

.c { grid-area: c; }
.signed { grid-area: signed; }
.percent { grid-area: percent; }
.divide { grid-area: divide; }
.times { grid-area: times; }
.minus { grid-area: minus; }
.plus { grid-area: plus; }
.equals { grid-area: equals; }

.seven { grid-area: seven; }
.eight { grid-area: eight; }
.nine { grid-area: nine; }
.four { grid-area: four; }
.five { grid-area: five; }
.six { grid-area: six; }
.one { grid-area: one; }
.two { grid-area: two; }
.three { grid-area: three; }
.zero { grid-area: zero; }
.decimal { grid-area: decimal; }

.divide, .times, .minus, .plus {
    color: var(--accent-color);
}

/* Scientific buttons */
.scientific-buttons {
    display: none;
    grid-template-columns: repeat(5, 1fr);
    gap: 15px;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--soft-high-light);
}

.calculator.scientific-mode {
    width: 400px;
    grid-template-rows: auto auto auto auto auto repeat(6, 1fr);
    grid-template-areas: 
        "toggle toggle toggle toggle"
        "voice voice voice voice"
        "history history history history"
        "display display display display"
        "live live live live"
        "memory memory memory memory"
        "c signed percent divide sqrt"
        "seven eight nine times pow"
        "four five six minus pi"
        "one two three plus fact"
        "zero zero decimal equals exp"
        "sin cos tan log graph";
}

.calculator.scientific-mode .scientific-buttons {
    display: grid;
}

/* Ripple effect */
.ripple-effect {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    transform: scale(0);
    animation: ripple 0.6s linear;
    pointer-events: none;
}

@keyframes ripple {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

/* Unit Converter Panel */
.unit-converter-panel {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--bg-color);
    border-radius: 30px;
    padding: 20px;
    z-index: 10;
    display: none;
    flex-direction: column;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
}

.converter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.converter-header h3 {
    color: var(--secondary-font-color);
}

.close-converter {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--primary-font-color);
    cursor: pointer;
}

.converter-content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.converter-group {
    display: flex;
    gap: 10px;
}

.converter-group input, .converter-group select {
    flex: 1;
    padding: 10px;
    border-radius: 15px;
    border: none;
    background: var(--bg-color);
    box-shadow: inset 4px 4px 8px var(--dark-high-light),
                inset -4px -4px 8px var(--soft-high-light);
    color: var(--secondary-font-color);
}

.convert-button {
    padding: 12px;
    margin-top: 10px;
}

/* Graph Container */
.graph-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--bg-color);
    border-radius: 30px;
    padding: 20px;
    z-index: 10;
    display: none;
    flex-direction: column;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.2);
}

.graph-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.graph-header h3 {
    color: var(--secondary-font-color);
}

.close-graph {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: var(--primary-font-color);
    cursor: pointer;
}

.graph-controls {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.graph-controls input {
    flex: 1;
    padding: 10px;
    border-radius: 15px;
    border: none;
    background: var(--bg-color);
    box-shadow: inset 4px 4px 8px var(--dark-high-light),
                inset -4px -4px 8px var(--soft-high-light);
    color: var(--secondary-font-color);
}

.plot-button {
    padding: 10px 15px;
}

#graphCanvas {
    flex-grow: 1;
    background: var(--bg-color);
    border-radius: 15px;
    box-shadow: inset 4px 4px 8px var(--dark-high-light),
                inset -4px -4px 8px var(--soft-high-light);
}

/* Button press animation */
@keyframes buttonPress {
    0% { transform: scale(1); }
    50% { transform: scale(0.95); }
    100% { transform: scale(1); }
}

.button-press {
    animation: buttonPress 0.2s ease;
}

/* Easter egg flip */
.flip-effect {
    animation: flip 1.5s ease;
}

@keyframes flip {
    0% { transform: rotateY(0); }
    50% { transform: rotateY(180deg); }
    100% { transform: rotateY(360deg); }
}

/* Responsive design */
@media (max-width: 768px) {
    .app-container {
        flex-direction: column;
        align-items: center;
    }
    
    .history-sidebar {
        width: 100%;
        max-width: 340px;
        margin-bottom: 20px;
    }
    
    .calculator.scientific-mode {
        width: 100%;
        max-width: 400px;
    }
}

@media (max-width: 480px) {
    .calculator {
        width: 100%;
        max-width: 340px;
        padding: 15px;
        gap: 10px;
    }
    
    .display {
        font-size: 2rem;
        padding: 0 15px;
        height: 60px;
    }
    
    .neumorphic {
        height: 50px;
        font-size: 1.2rem;
    }
    
    .zero {
        width: calc(100% - 5px);
    }
    
    .calculator.scientific-mode {
        max-width: 100%;
        padding: 15px;
    }
    
    .theme-switch-wrapper {
        flex-direction: column;
        align-items: flex-start;
    }
}